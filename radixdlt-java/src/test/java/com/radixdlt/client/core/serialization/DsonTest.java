package com.radixdlt.client.core.serialization;

import com.google.gson.JsonElement;
import com.radixdlt.client.core.address.RadixUniverseConfig;
import org.bouncycastle.util.encoders.Base64;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class DsonTest {
	@Test
	public void fromDsonTest() {
		Dson dson = Dson.getInstance();
		JsonElement jsonElement = dson.parse(Base64.decode("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"));
		RadixUniverseConfig universeFromDson = RadixJson.getGson().fromJson(jsonElement, RadixUniverseConfig.class);
		assertEquals(63799298, universeFromDson.getMagic());
		assertEquals(3, universeFromDson.getGenesis().size());
	}
}
